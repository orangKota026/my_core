import{aa as w,d as b,r as c,aY as h,ab as y,aZ as v,f as s,ae as n,a_ as _,a$ as m,aj as d,bi as k,aC as g,a5 as u,af as I}from"./index.559f29d6.js";import{Q as S}from"./QForm.209c8344.js";import{a as $}from"./api.64a45b19.js";import"./axios.f7d2ff76.js";class i extends Error{}i.prototype.name="InvalidTokenError";function C(t){return decodeURIComponent(atob(t).replace(/(.)/g,(e,o)=>{let r=o.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function P(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return C(e)}catch{return atob(e)}}function f(t,e){if(typeof t!="string")throw new i("Invalid token specified: must be a string");e||(e={});const o=e.header===!0?0:1,r=t.split(".")[o];if(typeof r!="string")throw new i(`Invalid token specified: missing part #${o+1}`);let p;try{p=P(r)}catch(l){throw new i(`Invalid token specified: invalid base64 for part #${o+1} (${l.message})`)}try{return JSON.parse(p)}catch(l){throw new i(`Invalid token specified: invalid json for part #${o+1} (${l.message})`)}}const V=b({name:"LoginPage",setup(){return{data:c({username:null,password:null}),isPwd:c(!0)}},methods:{async onSubmit(){const{data:t,status:e}=await $.post("https://mycore.web.id/auth/login",this.data);(e===200||e===201)&&(localStorage.setItem("access_token",t),localStorage.setItem("user",JSON.stringify(f(t))),h.create({progress:!0,timeout:3e3,type:"positive",position:"top-right",message:"login has been successfully"}),setTimeout(()=>{localStorage.setItem("access_token",t),localStorage.setItem("user",JSON.stringify(f(t))),this.$router.push({path:"/"})},500))}}}),Q={class:"login-page"},U={class:"q-mt-md"};function L(t,e,o,r,p,l){return y(),v("div",Q,[s(_,{class:"login-card"},{default:n(()=>[s(m,{class:"login-left"},{default:n(()=>e[3]||(e[3]=[d("div",{class:"logo-container"},[d("img",{src:"images/logo.png",alt:"App Logo",class:"logo"})],-1)])),_:1}),s(m,{class:"login-right"},{default:n(()=>[e[4]||(e[4]=d("div",{class:"text-h6 q-mb-md text-center"},"Login",-1)),s(S,{class:"q-gutter-xs",onSubmit:k(t.onSubmit,["prevent"])},{default:n(()=>[s(g,{modelValue:t.data.username,"onUpdate:modelValue":e[0]||(e[0]=a=>t.data.username=a),label:"Username",outlined:"",dense:"",rules:[a=>a&&a.length>1||"This field is required!"],autofocus:""},{prepend:n(()=>[s(u,{name:"person"})]),_:1},8,["modelValue","rules"]),s(g,{modelValue:t.data.password,"onUpdate:modelValue":e[2]||(e[2]=a=>t.data.password=a),label:"Password",type:t.isPwd?"password":"text",outlined:"",dense:"",rules:[a=>a&&a.length>1||"This field is required!"]},{prepend:n(()=>[s(u,{name:"lock"})]),append:n(()=>[s(u,{name:t.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[1]||(e[1]=a=>t.isPwd=!t.isPwd)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),d("div",U,[s(I,{label:"Login",color:"primary",type:"submit",class:"full-width"})])]),_:1},8,["onSubmit"])]),_:1})]),_:1})])}var B=w(V,[["render",L],["__scopeId","data-v-8513b470"]]);export{B as default};
