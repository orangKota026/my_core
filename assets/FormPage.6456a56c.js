import{aa as U,r as _,ab as c,aZ as N,f as d,ae as o,aj as e,ah as p,bg as C,bh as F,ag as r,ac as h,ai as b,af as I,d as P,ad as q,aC as y}from"./index.c7511acb.js";import{F as S}from"./FormPage.1718c578.js";import{a as g,d as x,e as V}from"./format.c022a5ee.js";import{Q as k}from"./QSelect.347a4232.js";import{a as A}from"./api.8c3e1a02.js";import"./QForm.928a4be6.js";import"./axios.f7d2ff76.js";const v="images/blank_profile.png",T={props:{modelValue:{type:Object,default:null},map:{type:Array,default:()=>["id","username","email"]},label:{type:String,required:!0},options:{type:Array},disable:{type:Boolean,default:!1},rules:{type:[Boolean,Array],default:()=>[]}},setup(){const l=_([]),t=_(null),s={}.RESOURCES||"http://localhost:7000resources/";return{def:l,opts:t,resource:s,defImage:v}},watch:{options(l){l&&l.length&&(this.def=l)}},mounted(){this.find().then(l=>this.def=l)},methods:{async find(l){if(this.opts)return l?[...this.opts].filter(t=>{const s=t.username?t.username.toLowerCase():"",u=t.email?t.email.toLowerCase():"";return s.indexOf(l)>-1||u.indexOf(l)>-1}):this.opts;{const{data:t}=await A.get("accounts",{params:{type:"select",search:l,pagination:{rowsPerPage:10,sortBy:"username",descending:!1}},errorNotification:!1});return this.map&&this.map.length?t[0].map(s=>{const u={};return this.map.forEach(m=>u[m]=s[m]||null),u}):t[0]}},async filterFn(l,t,s){if(l?l.toLowerCase():null){const m=await this.find(l.toLowerCase());t(()=>this.opts=m)}else{t(()=>this.opts=[...this.def]);return}},errorImg(l){l.target.src.indexOf(v)===-1&&(l.target.src=v)}}},B={class:"input-user"};function Q(l,t,s,u,m,w){return c(),N("div",B,[d(k,{dense:"",outlined:"","lazy-rules":"","hide-bottom-space":"",name:s.label,"label-slot":!s.modelValue,disable:s.disable,"model-value":s.modelValue,options:u.opts,"use-input":!s.modelValue,"input-debounce":"200",placeholder:s.modelValue?null:"Type username to find the user",onFilter:w.filterFn,"onUpdate:modelValue":t[1]||(t[1]=n=>l.$emit("update:modelValue",n)),rules:s.rules},{label:o(()=>[e("span",null,p(s.label),1)]),option:o(n=>[d(g,C(F(n.itemProps)),{default:o(()=>[d(x,null,{default:o(()=>[d(V,null,{default:o(()=>[r(p(n.opt.username?n.opt.username:n.opt.email),1)]),_:2},1024),n.opt.username?(c(),h(V,{key:0,caption:""},{default:o(()=>[r(p(n.opt.email),1)]),_:2},1024)):b("",!0)]),_:2},1024)]),_:2},1040)]),selected:o(()=>[s.modelValue?(c(),h(g,{key:0,dense:"",class:"full-width q-pa-none"},{default:o(()=>[d(x,null,{default:o(()=>[d(V,null,{default:o(()=>[r(p(s.modelValue.username?s.modelValue.username:s.modelValue.email),1)]),_:1}),s.modelValue.username?(c(),h(V,{key:0,caption:""},{default:o(()=>[r(p(s.modelValue.email),1)]),_:1})):b("",!0)]),_:1}),d(x,{side:""},{default:o(()=>[s.modelValue&&!s.disable?(c(),h(I,{key:0,class:"q-ml-sm",flat:"",round:"",size:"sm",icon:"close",onClick:t[0]||(t[0]=n=>l.$emit("update:modelValue",null))})):b("",!0)]),_:1})]),_:1})):b("",!0)]),"no-option":o(()=>[d(g,null,{default:o(()=>[d(x,{class:"text-grey"},{default:o(()=>t[2]||(t[2]=[r(" No results ")])),_:1})]),_:1})]),_:1},8,["name","label-slot","disable","model-value","options","use-input","placeholder","onFilter","rules"])])}var E=U(T,[["render",Q],["__scopeId","data-v-14752866"]]);const L=P({name:"FormUserPage",components:{FormPage:S,AccountSelect:E},setup(){return{endpoint:"employees",title:_("Employee"),data:_({}),editMod:_(!0)}}}),O={class:"row"},D={class:"col-12 q-mb-md"},R={class:"row items-center"},j={class:"col-md-9 col-xs-12"},H={class:"col-12 q-mb-md"},M={class:"row items-center"},Z={class:"col-md-9 col-xs-12"},G={class:"col-12 q-mb-md"},J={class:"row items-center"},K={class:"col-md-9 col-xs-12"},W={class:"col-12 q-mb-md"},X={class:"row items-center"},Y={class:"col-md-9 col-xs-12"},$={class:"col-12 q-mb-md"},ee={class:"row items-center"},te={class:"col-md-9 col-xs-12"};function le(l,t,s,u,m,w){const n=q("AccountSelect"),z=q("FormPage",!0);return c(),h(z,{endpoint:l.endpoint,"title-value":l.title,"model-value":l.data,"edit-value":l.editMod,ref:"form","icon-value":"person"},{body:o(({model:i,edit:f})=>[e("div",O,[e("div",D,[e("div",R,[t[0]||(t[0]=e("div",{class:"col-md-3 col-xs-12"},[e("div",{class:"self-center full-width no-outline text-left q-pr-md",tabindex:"0"},[r(" Account"),e("span",{class:"text-red text-right",style:{"font-size":"14px"}}," * ")])],-1)),e("div",j,[d(n,{label:"Account",disable:!f,rules:[a=>a?!0:"This field is required!"],modelValue:i.accountId,"onUpdate:modelValue":a=>i.accountId=a},null,8,["disable","rules","modelValue","onUpdate:modelValue"])])])]),e("div",H,[e("div",M,[t[1]||(t[1]=e("div",{class:"col-md-3 col-xs-12"},[e("div",{class:"self-center full-width no-outline text-left q-pr-md",tabindex:"0"},[r(" Indetity Number"),e("span",{class:"text-red text-right",style:{"font-size":"14px"}}," * ")])],-1)),e("div",Z,[d(y,{disable:!f,dense:"",outlined:"","lazy-rules":"","hide-bottom-space":"",label:"Indetity Number",rules:[a=>a&&a.length>1||"This field is required!"],modelValue:i.indetityNumber,"onUpdate:modelValue":a=>i.indetityNumber=a},null,8,["disable","rules","modelValue","onUpdate:modelValue"])])])]),e("div",G,[e("div",J,[t[2]||(t[2]=e("div",{class:"col-md-3 col-xs-12"},[e("div",{class:"self-center full-width no-outline text-left q-pr-md",tabindex:"0"},[r(" Name"),e("span",{class:"text-red text-right",style:{"font-size":"14px"}}," * ")])],-1)),e("div",K,[d(y,{disable:!f,dense:"",outlined:"","lazy-rules":"","hide-bottom-space":"",label:"Name",rules:[a=>a&&a.length>1||"This field is required!"],modelValue:i.name,"onUpdate:modelValue":a=>i.name=a},null,8,["disable","rules","modelValue","onUpdate:modelValue"])])])]),e("div",W,[e("div",X,[t[3]||(t[3]=e("div",{class:"col-md-3 col-xs-12"},[e("div",{class:"self-center full-width no-outline text-left q-pr-md",tabindex:"0"},[r(" Title"),e("span",{class:"text-red text-right",style:{"font-size":"14px"}}," * ")])],-1)),e("div",Y,[d(y,{disable:!f,dense:"",outlined:"","lazy-rules":"","hide-bottom-space":"",label:"Title",rules:[a=>a&&a.length>1||"This field is required!"],modelValue:i.title,"onUpdate:modelValue":a=>i.title=a},null,8,["disable","rules","modelValue","onUpdate:modelValue"])])])]),e("div",$,[e("div",ee,[t[4]||(t[4]=e("div",{class:"col-md-3 col-xs-12"},[e("div",{class:"self-center full-width no-outline text-left q-pr-md",tabindex:"0"},[e("span",{class:"text-right",style:{"font-size":"14px"}},"Hire Date")])],-1)),e("div",te,[d(y,{disable:!f,dense:"",outlined:"","lazy-rules":"","hide-bottom-space":"",label:"Hire Date",type:"date",modelValue:i.hire_date,"onUpdate:modelValue":a=>i.hire_date=a,rules:[a=>a&&a.length>1||"This field is required!"]},null,8,["disable","modelValue","onUpdate:modelValue","rules"])])])])])]),_:1},8,["endpoint","title-value","model-value","edit-value"])}var ue=U(L,[["render",le]]);export{ue as default};
